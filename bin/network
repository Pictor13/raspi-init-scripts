set -o pipefail


# set static IP for WIreless & Ethernet interfaces
if [ -n $WIFI_IP ]
then
    sudo ip address add $WIFI_IP/$SUBNET_MASK dev wlan0
    echo "wlan0 static ip address $WIFI_IP/$SUBNET_MASK was set"
fi

if [ -n $ETHERNET_IP ]
then
    sudo ip address add $ETHERNET_IP/$SUBNET_MASK dev eth0
    echo "eth0 static ip address $ETHERNET_IP/$SUBNET_MASK was set"
fi


# speed up DHCP
#  (https://wiki.archlinux.org/index.php/dhcpcd#DHCP_static_route(s)#Speed_up_DHCP_by_disabling_ARP_probing)
echo "noarp" > /etc/dhcpcd.conf



#######################
#OHTERS:

#sudo ip address add 192.168.178.48/24 dev wlan0
#sudo ip address del 192.168.178.48/24 dev wlan0

#/usr/lib/dhcpcd/dhcpcd-hooks/10-wireless-static-ip

sudo dhcpcd -S ip_address=$WIFI_IP/$SUBNET_MASK \
       -S routers=$GATEWAY \
       -S domain_name_servers=$DNS1,$DNS2 \
       wlan0
