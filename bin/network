set -o pipefail

if ( ! cat /etc/dhcpcd.conf | grep "## >>>PIMP-CONFIG" &>/dev/null);
then
    # (eventually) set default values, compile source file
    # and append compiled one into destination 
    GATEWAY="${GATEWAY:-'10.0.0.1'}" \
    \
    envsubst < config/network/dhcpcd.conf | sudo tee --append /etc/dhcpcd.conf >/dev/null
    echo "static ip for interface Ethernet ($ETHERNET_IP) and Wifi ($WIFI_IP) was set"

    echo "restart network interfaces"
    sudo /etc/init.d/networking restart
fi
